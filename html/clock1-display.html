<!DOCTYPE html>
<html>

<head>
  <title>Digital Clock</title>
  <link rel="stylesheet" href="../css/clock1-design.css">
  <link rel="stylesheet" href="../css/clock-color.css">
  <style>
    /* body {
      color: #B6B6B6;
    } */
  </style>
</head>

<body>
  <div class="clock" id="clock">00:00</div>
  <script>
    const { ipcRenderer } = require('electron');

    let is24HourFormat = true;


    function updateClock() {
      const now = new Date();
      let hours = now.getHours();
      let minutes = now.getMinutes();


      if (!is24HourFormat) {
        hours = hours % 12 || 12;
      }

      minutes = minutes < 10 ? '0' + minutes : minutes;

      const timeString = `${hours}:${minutes}`;
      document.getElementById('clock').textContent = timeString;
    }

    function resizeClock({ newWidth, newHeight }) {
      const clockElement = document.getElementById('clock');
      const fontSize = newHeight * 0.8;
      clockElement.style.fontSize = `${fontSize}px`;
    }


    document.addEventListener('DOMContentLoaded', () => {
      document.body.style.color = '#B6B6B6';
      document.body.className = 'li-grey';
    });


    ipcRenderer.on('change-clock1-color', (event, colorSet) => {
      document.body.className = colorSet;
      localStorage.setItem('colorSet', colorSet);
    });

    ipcRenderer.on('set-clock-format', (event, { format }) => {
      console.log(`Received set-clock-format: ${format}`);
      is24HourFormat = (format === '24h');
      updateClock();
    });

    ipcRenderer.on('clock-status', (event, status) => {
      isClockOpen = status;
      localStorage.setItem('isClockOpen', status);
    });

    ipcRenderer.on('resize-clock', (event, { newWidth, newHeight }) => {
      resizeClock({ newWidth, newHeight });
    });

    ipcRenderer.on('toggle-display', (event, { status }) => {
      isClockOpen = status;
      localStorage.setItem('isClockOpen', status);
      if (status) {
        window.show();

      } else {
        window.hide();
      }
    });




    setInterval(updateClock, 1000 * 60);

    updateClock();

    resizeClock({ newWidth: 800, newHeight: 300 });






















































    


  </script>
</body>

</html>